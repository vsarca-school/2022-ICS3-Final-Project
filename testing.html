<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <title>ICS Final Project</title>
    <script src="gpu.js/dist/gpu-browser.min.js"> // Libary for fast computation </script>
    <script>
        // GPU is a constructor and namespace for browser
        /*
        const generateMatrices = () => {
            const matrices = [[], []]
            for (let y = 0; y < 512; y++){
            matrices[0].push([])
            matrices[1].push([])
            for (let x = 0; x < 512; x++){
                matrices[0][y].push(Math.random())
                matrices[1][y].push(Math.random())
            }
            }
            return matrices
        }

        
        class thing {
            constructor() {
                this.gpu = new GPU();
                this.multiplyMatrix = [];
                for (let i=0; i<10; i++)
                {
                    this.multiplyMatrix.push(eval(`this.gpu.createKernel(function(a,b) {
                        return a[this.thread.x]*b[this.thread.x];
                    }).setOutput([10])`));
                }
                console.log(this.multiplyMatrix[0]([0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]));
            }
        }

        t = new thing();
        const matrices = generateMatrices();
        const out = t.multiplyMatrix[0]([0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]);
        console.log(out); //*/
    </script>

    <script src="LearnAI.js"></script>
    <script>
        // We will eventually get our digits from here: https://pkgstore.datahub.io/machine-learning/mnist_784/mnist_784_json/data/617bd9fcff01b7d3621d67cef6405d12/mnist_784_json.json
        dataset = [[[1,1]], [[0,1]]];
        for (let i=0; i<999; i++)
        {
            let x = Math.random();
            let y = Math.random();
            dataset[0].push([x,y]);
            if (x + y < 1)
            {
                dataset[1].push([1,0]); //safe
            }
            else
            {
                dataset[1].push([0,1]); // poisonous
            }
        }

        function myActivation(x) {
            //return x>1 ? 1 : 0;
            return x;
        }
        function myDerivative(y) {
            return 1;
        }

        //NeuralNetwork.print();

        nn = new NeuralNetwork(2, 2).randomize().generateGPU(); // .setActivationFunction(myActivation, myDerivative)
        nn.layerweights = [[[1,0], [1,0]]];
        nn.layerbiases = [[1,0]];

        console.log(nn.layerweights, nn.layerbiases);

        console.log(nn.runNetwork(dataset[0][0]));
        
        //DeepLearner.print();

        dl = new DeepLearner(nn, dataset, { learnrate: 0.5, batchsize: 100, batchsplit: 0.8 });
        
        //console.log("Network gets", dl.countAll(), "/ 1000 test cases correct");
        //dl.train(1000);
        //let tester = setInterval(function () { console.log("Network gets", dl.countAll(), "/ 1000 test cases correct"); }, 10000);
        //let printer = setInterval(function () { console.log("Weights:", nn.layerweights, ", Biases:", nn.layerbiases); }, 10000);
        dl.trainOnce();
        //dl.trainOnce();
        //dl.trainOnce();
    </script>
</head>

<body>
    <p>This is our ICS final project!</p>
</body>
</html>